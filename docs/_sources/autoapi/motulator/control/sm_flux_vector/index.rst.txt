:py:mod:`motulator.control.sm_flux_vector`
==========================================

.. py:module:: motulator.control.sm_flux_vector

.. autoapi-nested-parse::

   Flux-vector control for synchronous motor drives.

   This implements a simplified version of stator-flux-vector control [Ra0108916492f-1]_. The
   rotor coordinates are used in this implementation [Ra0108916492f-2]_. One control variable is
   the stator-flux magnitude and another is the electromagnetic torque. The latter
   choice differs from [Ra0108916492f-1]_ and [Ra0108916492f-2]_, where the torque-producing current component
   is used. Furthermore, here proportional control is used for simplicity. The
   magnetic saturation is not considered in this implementation.

   .. rubric:: References

   .. [Ra0108916492f-1] Pellegrino, Armando, Guglielmi, “Direct flux field-oriented control of
      IPM drives with variable DC link in the field-weakening region,” IEEE Trans.
      Ind. Appl., 2009, https://doi.org/10.1109/TIA.2009.2027167

   .. [Ra0108916492f-2] Awan, Hinkkanen, Bojoi, Pellegrino, "Stator-flux-oriented control of
      synchronous motors: A systematic design procedure," IEEE Trans. Ind. Appl.,
      2019, https://doi.org/10.1109/TIA.2019.2927316

   ..
       !! processed by numpydoc !!


Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   motulator.control.sm_flux_vector.SynchronousMotorFluxVectorCtrlPars
   motulator.control.sm_flux_vector.SynchronousMotorFluxVectorCtrl
   motulator.control.sm_flux_vector.FluxTorqueCtrl
   motulator.control.sm_flux_vector.FluxTorqueRef
   motulator.control.sm_flux_vector.Observer




.. py:class:: SynchronousMotorFluxVectorCtrlPars

   
   Control parameters: flux-vector control for synchronous motor drives.
















   ..
       !! processed by numpydoc !!
   .. py:attribute:: w_m_ref
      :annotation: :collections.abc.Callable[[float], float]

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: sensorless
      :annotation: :bool = True

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: T_s
      :annotation: :float = 0.00025

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: psi_s_nom
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: psi_s_max
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: psi_s_min
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: k_u
      :annotation: :float = 0.9

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: alpha_psi
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: alpha_tau_max
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: alpha_s
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: tau_M_max
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: i_s_max
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: R_s
      :annotation: :float = 3.6

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: L_d
      :annotation: :float = 0.036

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: L_q
      :annotation: :float = 0.051

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: psi_f
      :annotation: :float = 0.545

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: p
      :annotation: :int = 3

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: J
      :annotation: :float = 0.015

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: w_o
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: zeta_inf
      :annotation: :float = 0.2

      
















      ..
          !! processed by numpydoc !!

   .. py:attribute:: g
      :annotation: :float

      
















      ..
          !! processed by numpydoc !!


.. py:class:: SynchronousMotorFluxVectorCtrl(pars=SynchronousMotorFluxVectorCtrlPars())

   Flux-vector control for synchronous motor drives.

   This class interconnects the subsystems of the control system and
   provides the interface to the solver.



   :param pars: Control parameters.
   :type pars: SynchronousMotoroFluxVectorCtrlPars
















   ..
       !! processed by numpydoc !!

   .. py:method:: __call__(self, mdl)

      
      Main control loop.

      :param mdl: Continuous-time model of a synchronous motor drive for getting the
                  feedback signals.
      :type mdl: SynchronousMotorDrive

      :returns: * **T_s** (*float*) -- Sampling period.
                * **d_abc_ref** (*ndarray, shape (3,)*) -- Duty ratio references.















      ..
          !! processed by numpydoc !!

   .. py:method:: post_process(self)

      
      Transform the lists to the ndarray format.
















      ..
          !! processed by numpydoc !!


.. py:class:: FluxTorqueCtrl(pars)

   Stator flux and torque controller.

   :param pars: Control parameters.
   :type pars: SynchronousMotoroFluxVectorCtrlPars

   ..
       !! processed by numpydoc !!

   .. py:method:: __call__(self, psi_s_ref, tau_M_ref, psi_s, i_s, w_m, u_dc)

      
      Compute the unlimited voltage reference.

      :param psi_s_ref: Stator flux reference (magnitude).
      :type psi_s_ref: float
      :param tau_M_ref: Torque reference.
      :type tau_M_ref: float
      :param psi_s: Stator flux estimate.
      :type psi_s: complex
      :param i_s: Stator current.
      :type i_s: complex
      :param w_m: Rotor speed (in electrical rad/s).
      :type w_m: float
      :param u_dc: DC-bus voltage.
      :type u_dc: float

      :returns: **u_s_ref** -- Unlimited voltage reference.
      :rtype: complex















      ..
          !! processed by numpydoc !!


.. py:class:: FluxTorqueRef(pars)

   Flux and torque references.

   :param pars: Control parameters.
   :type pars: SynchronousMotoroFluxVectorCtrlPars

   ..
       !! processed by numpydoc !!

   .. py:method:: __call__(self, tau_M_ref, w_m, u_dc)

      
      Calculate the stator flux reference and limit the torque reference.

      :param tau_M_ref: Unlimited torque reference.
      :type tau_M_ref: float
      :param w_m: Rotor speed (in electrical rad/s).
      :type w_m: float
      :param u_dc: DC-bus voltage.
      :type u_dc: float

      :returns: * **psi_s_ref** (*float*) -- Stator flux reference.
                * **tau_M_ref_lim** (*float*) -- Limited torque reference.















      ..
          !! processed by numpydoc !!


.. py:class:: Observer(pars)

   Sensored observer.



   :param pars: Control parameters.
   :type pars: SynchronousMotoroFluxVectorCtrlPars
















   ..
       !! processed by numpydoc !!

   .. py:method:: update(self, u_s, i_s, w_m)

      
      Update the states for the next sampling period.

      :param u_s: Stator voltage in estimated rotor coordinates.
      :type u_s: complex
      :param i_s: Stator current in estimated rotor coordinates.
      :type i_s: complex
      :param w_m: Rotor speed (in electrical rad/s).
      :type w_m: float















      ..
          !! processed by numpydoc !!


